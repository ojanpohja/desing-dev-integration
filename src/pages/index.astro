---
import Base from '../layouts/Base.astro';
import Card from '../components/Card.astro';
import { getPage, getAllProjects } from '../lib/content';

const home = getPage('home');
const projects = getAllProjects().slice(0, 6);
const base = import.meta.env.BASE_URL;
---
<Base title={home.data.title}>
  <article class="grid">
    <div set:html={home.body} />
    <h2>Recent Projects</h2>
    <div class="grid" style="grid-template-columns: repeat(auto-fill, minmax(260px, 1fr));">
      {projects.map((p) => (
        <Card
          title={p.data.title}
          href={`${base}projects/${p.slug}/`}
          summary={p.data.summary}
        />
      ))}
    </div>
  </article>
</Base>
